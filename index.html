<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" type="image/jpg" href="content/logo/favicon.png"/>
  <!-- linking the stylesheet -->
  <link rel="stylesheet" href="css/styles.css">
  <title>Ethik und Informatik</title>
</head>
<body>
  <div class="container">
  <h1><a href="about/about.html">Ethik und Informatik</a></h1></div>
   

  <div class="container">
    <h2 id="headline">Countdown bis zum n√§chsten Treffen:</h2>
    <div id="countdown">
      <ul>
        <li><span id="days"></span>Tage</li>
        <li><span id="hours"></span>Stunden</li>
        <li><span id="minutes"></span>Minuten</li>
        <li><span id="seconds"></span>Sekunden</li>
      </ul>
    </div>
    <div class="message">
      <div id="content">
        <p> Kommt in unseren Online-Raum!</p>
      </div>
    </div>
    <div class="content">
      <span>Wir treffen uns hier: <a href="https://meeting.uni-weimar.de/b/lud-3a2-zkz">https://meeting.uni-weimar.de/b/lud-3a2-zkz</a></span>
    </div>
  </div>

<script>
  (function () {
    const second = 1000,
      minute = second * 60,
      hour = minute * 60,
      day = hour * 24;
   
    let birthday = "Apr 7, 2021 18:00:00",
      countDown = new Date(birthday).getTime(),
      x = setInterval(function () {
        let now = new Date().getTime(),
          distance = countDown - now;
        while (distance < -hour*2) {
          distance = distance + 14*day;
        }
        (document.getElementById("days").innerText = Math.floor(distance / day)),
          (document.getElementById("hours").innerText = Math.floor(
            (distance % day) / hour
          )),
          (document.getElementById("minutes").innerText = Math.floor(
            (distance % hour) / minute
          )),
          (document.getElementById("seconds").innerText = Math.floor(
            (distance % minute) / second
          ));
   
        //do something later when date is reached
        if (distance < 0) {
          let headline = document.getElementById("headline"),
            countdown = document.getElementById("countdown"),
            content = document.getElementById("content");
          countdown.style.color = "#eb1c1c";
          headline.innerText = "Wir treffen uns jetzt!";
          countdown.style.display = "none";
          content.style.display = "block";
   
          clearInterval(x);
        } if (distance < 3600000 * 2) {
          let headline = document.getElementById("headline"),
            countdown = document.getElementById("countdown"),
            content = document.getElementById("content");
          countdown.style.color = "#eb1c1c";

        }
        //seconds
      }, 0);
  })();
   
  </script>
  <!-- fixed width logo just 2 demonstrate, prolly should be moved to styles.css and referened here -->
  <div align="center">
    <img src="content/logo/logo_verbose_sticker.png" width="500"></img>
  </div>
  <!-- sample text -->
  lorem ipsum dolor sit amet

<!-- function to load XML file-->
<script>
  function loadXml(xmlfile_path) {
      fetch (xmlfile_path)
          .then (function (response) {
              // Antwort kommt als Text-String
              return response.text();
          })
          .then (function (data) {
              console.log (data);			  // schnell mal in der Konsole checken
              
              // String in ein XML-DOM-Objekt umwandeln
              let parser = new DOMParser (),
                  xmlDoc = parser.parseFromString (data, 'text/xml');
              console.log (xmlDoc.getElementsByTagName ('article'));
              console.log ("item "  + xmlDoc.getElementsByTagName ('article')[0].children[0].textContent);
              var articles = xmlDoc.getElementsByTagName("article")
              var i;
              for (i = 0; i < articles.length; i++) {
                  addArticle(articles[i], i);
              } 
      }).catch (function (error) {
          console.log ("Fehler: bei Auslesen der XML-Datei " + error);
      });
  }
  </script>

<!-- function to add dummy Article -->
<script>
  function addArticle(article_item, index) {

  // Get articles element
  var articles = document.getElementById("articles");
   
   // Create element + set contents
   var article = document.createElement('div');//document.createElement("div id=\"article\"");
   article.setAttribute("id", "article");
   
   // Create article elements
   var title = document.createElement('div');
   title.innerHTML = article_item.children[1].textContent;
   title.setAttribute("id", "title");
   article.appendChild(title);

   var link = document.createElement('div');
   link.innerHTML = article_item.children[0].textContent;
   link.setAttribute("id", "link");
   article.appendChild(link);

   var author = document.createElement('div');
   author.innerHTML = article_item.children[2].textContent;
   author.setAttribute("id", "author");
   article.appendChild(author);

   var synopsis = document.createElement('div');
   synopsis.innerHTML = article_item.children[3].textContent;//"Have yourself a merry little christmas.";
   synopsis.setAttribute("id", "synopsis");
   article.appendChild(synopsis);
   
   articles.appendChild(article);

  }
  </script>

  <!-- function to load and add articles on page request -->
  <script>
  window.addEventListener("load", function(){
      loadXml("articles/articles.xml");
  });
  </script>

  <div id="articles"></div>
</body>
</html>